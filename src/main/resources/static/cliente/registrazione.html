<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrazione Cliente</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>

<header>
    <h1>Coffee Capp UniPA</h1>
</header>

<main>
    <div class="form-container">
        <h2>Registrati</h2>

        <!-- Box errore (mostra solo se c’è ?err=...) -->
        <p id="reg-error" style="display:none; color:#b00020; margin: 10px 0;"></p>

        <form action="/route/register" method="post">
            <label for="username">Username</label>
            <input type="text" id="username" name="username" required placeholder="es. cliente2">

            <label for="email">Email</label>
            <input type="email" id="email" name="email" required placeholder="es. cliente2@unipa.it">

            <!-- Password: presente solo come UI, non viene usata in questa fase -->
            <label for="password">Password (non utilizzata in questa fase)</label>
            <input type="password" id="password" name="password" placeholder="(ignorata)">

            <button type="submit" class="btn">Registrati</button>
        </form>

        <p>Hai già un account? <a href="../login.html">Accedi</a></p>
    </div>
</main>

<footer>
    <p>© 2025 Coffee Capp UniPA</p>
</footer>

<script>
    (function () {
        const params = new URLSearchParams(window.location.search);
        const err = params.get("err");
        if (!err) return;

        const box = document.getElementById("reg-error");
        if (!box) return;

        const messages = {
            "missing_username": "Inserisci lo username.",
            "already_exists": "Username già esistente. Prova ad accedere.",
            "server": "Errore di sistema (DB non disponibile o errore JDBC)."
        };

        box.textContent = messages[err] || ("Errore: " + err);
        box.style.display = "block";
    })();
</script>

</body>
</html>
